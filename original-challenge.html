<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Archaeoriddle: the original challenge | Archaeoriddle, the bookdown</title>
  <meta name="description" content="First draft of Rbookdown to describe how data have been generated" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Archaeoriddle: the original challenge | Archaeoriddle, the bookdown" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="First draft of Rbookdown to describe how data have been generated" />
  <meta name="github-repo" content="acortell3/archaeoriddle" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Archaeoriddle: the original challenge | Archaeoriddle, the bookdown" />
  
  <meta name="twitter:description" content="First draft of Rbookdown to describe how data have been generated" />
  

<meta name="author" content="the Computational and Digital Archaeology Laboratory (University of Cambridge)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="final-output.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.11/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-archaeoriddle"><i class="fa fa-check"></i><b>1.1</b> What is archaeoriddle?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-will-you-find-in-this-bookdown"><i class="fa fa-check"></i><b>1.2</b> What will you find in this bookdown?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-can-you-do-with-this"><i class="fa fa-check"></i><b>1.3</b> What can you do with this?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="env.html"><a href="env.html"><i class="fa fa-check"></i><b>2</b> Landscape &amp; Resources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="env.html"><a href="env.html#autocorrelated-noise-generation"><i class="fa fa-check"></i><b>2.1</b> Autocorrelated noise generation</a></li>
<li class="chapter" data-level="2.2" data-path="env.html"><a href="env.html#slope-and-elevation"><i class="fa fa-check"></i><b>2.2</b> Slope and Elevation</a></li>
<li class="chapter" data-level="2.3" data-path="env.html"><a href="env.html#environmental-resources"><i class="fa fa-check"></i><b>2.3</b> Environmental resources</a></li>
<li class="chapter" data-level="2.4" data-path="env.html"><a href="env.html#manual-selection"><i class="fa fa-check"></i><b>2.4</b> Manually Select Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="popgrowth.html"><a href="popgrowth.html"><i class="fa fa-check"></i><b>3</b> Population structure &amp; growth</a>
<ul>
<li class="chapter" data-level="3.1" data-path="popgrowth.html"><a href="popgrowth.html#settlements-position"><i class="fa fa-check"></i><b>3.1</b> Settlements position</a></li>
<li class="chapter" data-level="3.2" data-path="popgrowth.html"><a href="popgrowth.html#initsize"><i class="fa fa-check"></i><b>3.2</b> Initializing Site Population and Culture</a></li>
<li class="chapter" data-level="3.3" data-path="popgrowth.html"><a href="popgrowth.html#base-pop-growth"><i class="fa fa-check"></i><b>3.3</b> Population Growth : <span class="math inline">\(Pop\)</span>-protocol</a>
<ul>
<li class="chapter" data-level="" data-path="popgrowth.html"><a href="popgrowth.html#source"><i class="fa fa-check"></i>Source</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conflict.html"><a href="conflict.html"><i class="fa fa-check"></i><b>4</b> Migration &amp; Conflict</a>
<ul>
<li class="chapter" data-level="4.1" data-path="conflict.html"><a href="conflict.html#fission"><i class="fa fa-check"></i><b>4.1</b> Fission</a></li>
<li class="chapter" data-level="4.2" data-path="conflict.html"><a href="conflict.html#migration"><i class="fa fa-check"></i><b>4.2</b> Migration</a></li>
<li class="chapter" data-level="4.3" data-path="conflict.html"><a href="conflict.html#conflict-and-war"><i class="fa fa-check"></i><b>4.3</b> Conflict and War</a></li>
<li class="chapter" data-level="4.4" data-path="conflict.html"><a href="conflict.html#deprecated-network-site-size-and-climate"><i class="fa fa-check"></i><b>4.4</b> DEPRECATED ‚Äì Network, Site Size And Climate</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="main-simu.html"><a href="main-simu.html"><i class="fa fa-check"></i><b>5</b> Main Simulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="main-simu.html"><a href="main-simu.html#initial-parameters"><i class="fa fa-check"></i><b>5.1</b> Initial Parameters</a></li>
<li class="chapter" data-level="5.2" data-path="main-simu.html"><a href="main-simu.html#preparation"><i class="fa fa-check"></i><b>5.2</b> Preparation</a></li>
<li class="chapter" data-level="5.3" data-path="main-simu.html"><a href="main-simu.html#algorithm"><i class="fa fa-check"></i><b>5.3</b> Algorithm</a>
<ul>
<li class="chapter" data-level="" data-path="main-simu.html"><a href="main-simu.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="main-simu.html"><a href="main-simu.html#explore-simulation"><i class="fa fa-check"></i><b>5.4</b> Explore simulation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="recgen.html"><a href="recgen.html"><i class="fa fa-check"></i><b>6</b> Record formation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="recgen.html"><a href="recgen.html#theoretical-model"><i class="fa fa-check"></i><b>6.1</b> Theoretical model</a></li>
<li class="chapter" data-level="6.2" data-path="recgen.html"><a href="recgen.html#implementation"><i class="fa fa-check"></i><b>6.2</b> Implementation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="recgen.html"><a href="recgen.html#population-pop-protocol"><i class="fa fa-check"></i><b>6.2.1</b> Population <span class="math inline">\(Pop\)</span>-protocol</a></li>
<li class="chapter" data-level="6.2.2" data-path="recgen.html"><a href="recgen.html#anthropogenic-deposition-a-protocol"><i class="fa fa-check"></i><b>6.2.2</b> Anthropogenic deposition <span class="math inline">\(A\)</span>-protocol</a></li>
<li class="chapter" data-level="6.2.3" data-path="recgen.html"><a href="recgen.html#depth-d-protocol"><i class="fa fa-check"></i><b>6.2.3</b> Depth <span class="math inline">\(D\)</span>-protocol</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="recgen.html"><a href="recgen.html#minimal-example-and-simulation"><i class="fa fa-check"></i><b>6.3</b> Minimal example and simulation</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="recloss.html"><a href="recloss.html"><i class="fa fa-check"></i><b>7</b> Record loss</a>
<ul>
<li class="chapter" data-level="7.1" data-path="recloss.html"><a href="recloss.html#theoretical-model-1"><i class="fa fa-check"></i><b>7.1</b> Theoretical model</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="recloss.html"><a href="recloss.html#general-purpose"><i class="fa fa-check"></i><b>7.1.1</b> General purpose</a></li>
<li class="chapter" data-level="7.1.2" data-path="recloss.html"><a href="recloss.html#model-layers"><i class="fa fa-check"></i><b>7.1.2</b> Model layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="recloss.html"><a href="recloss.html#implementation-1"><i class="fa fa-check"></i><b>7.2</b> Implementation</a>
<ul>
<li class="chapter" data-level="" data-path="recloss.html"><a href="recloss.html#source-1"><i class="fa fa-check"></i>Source</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="recloss.html"><a href="recloss.html#usage"><i class="fa fa-check"></i><b>7.3</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="final-output.html"><a href="final-output.html"><i class="fa fa-check"></i><b>8</b> Generate final archaeological record</a>
<ul>
<li class="chapter" data-level="8.1" data-path="final-output.html"><a href="final-output.html#using-sites-size-to-generate-deposit"><i class="fa fa-check"></i><b>8.1</b> Using sites size to generate deposit</a></li>
<li class="chapter" data-level="8.2" data-path="final-output.html"><a href="final-output.html#public-data"><i class="fa fa-check"></i><b>8.2</b> Provide survey square and publicly available dates</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="final-output.html"><a href="final-output.html#giving-name-to-the-publicly-available-data"><i class="fa fa-check"></i><b>8.2.1</b> Giving name to the publicly available data</a></li>
<li class="chapter" data-level="8.2.2" data-path="final-output.html"><a href="final-output.html#export-and-download-dates"><i class="fa fa-check"></i><b>8.2.2</b> Export and download dates</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="final-output.html"><a href="final-output.html#bonus-maps"><i class="fa fa-check"></i><b>8.3</b> Bonus maps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="original-challenge.html"><a href="original-challenge.html"><i class="fa fa-check"></i><b>9</b> Archaeoriddle: the original challenge</a>
<ul>
<li class="chapter" data-level="9.1" data-path="original-challenge.html"><a href="original-challenge.html#context"><i class="fa fa-check"></i><b>9.1</b> Context</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="original-challenge.html"><a href="original-challenge.html#original-idea-and-first-reflections"><i class="fa fa-check"></i><b>9.1.1</b> Original idea and first reflections</a></li>
<li class="chapter" data-level="9.1.2" data-path="original-challenge.html"><a href="original-challenge.html#birth-of-a-challenge"><i class="fa fa-check"></i><b>9.1.2</b> Birth of a Challenge</a></li>
<li class="chapter" data-level="9.1.3" data-path="original-challenge.html"><a href="original-challenge.html#the-british-academy-grant-november-2022"><i class="fa fa-check"></i><b>9.1.3</b> The British Academy Grant ‚Äì November 2022</a></li>
<li class="chapter" data-level="9.1.4" data-path="original-challenge.html"><a href="original-challenge.html#caa-oxford-june-2023"><i class="fa fa-check"></i><b>9.1.4</b> CAA Oxford ‚Äì June 2023</a></li>
<li class="chapter" data-level="9.1.5" data-path="original-challenge.html"><a href="original-challenge.html#the-eaa-call-for-proposal-august-2023"><i class="fa fa-check"></i><b>9.1.5</b> The EAA call for proposal ‚Äì August 2023</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="original-challenge.html"><a href="original-challenge.html#implementation-2"><i class="fa fa-check"></i><b>9.2</b> Implementation</a></li>
<li class="chapter" data-level="9.3" data-path="original-challenge.html"><a href="original-challenge.html#lets-rewind-the-tape"><i class="fa fa-check"></i><b>9.3</b> Let‚Äôs rewind the tape</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="original-challenge.html"><a href="original-challenge.html#generate-and-share-final-simulation"><i class="fa fa-check"></i><b>9.3.1</b> Generate and share final simulation</a></li>
<li class="chapter" data-level="9.3.2" data-path="original-challenge.html"><a href="original-challenge.html#grid-generation-and-sharing"><i class="fa fa-check"></i><b>9.3.2</b> Grid generation and sharing</a></li>
<li class="chapter" data-level="9.3.3" data-path="original-challenge.html"><a href="original-challenge.html#naming"><i class="fa fa-check"></i><b>9.3.3</b> Giving name to the publicly available data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="original-challenge.html"><a href="original-challenge.html#the-proposals"><i class="fa fa-check"></i><b>9.4</b> The proposals</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="original-challenge.html"><a href="original-challenge.html#p1"><i class="fa fa-check"></i><b>9.4.1</b> P1</a></li>
<li class="chapter" data-level="9.4.2" data-path="original-challenge.html"><a href="original-challenge.html#p2"><i class="fa fa-check"></i><b>9.4.2</b> P2</a></li>
<li class="chapter" data-level="9.4.3" data-path="original-challenge.html"><a href="original-challenge.html#p3"><i class="fa fa-check"></i><b>9.4.3</b> P3</a></li>
<li class="chapter" data-level="9.4.4" data-path="original-challenge.html"><a href="original-challenge.html#p4"><i class="fa fa-check"></i><b>9.4.4</b> P4</a></li>
<li class="chapter" data-level="9.4.5" data-path="original-challenge.html"><a href="original-challenge.html#p5"><i class="fa fa-check"></i><b>9.4.5</b> P5</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/acortell3/archaeoriddle/">
source</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Archaeoriddle, the bookdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="original-challenge" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">9</span> Archaeoriddle: the original challenge<a href="original-challenge.html#original-challenge" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter we will here go through the whole steps we presented throughout Chapter¬†<a href="env.html#env">2</a> to¬†<a href="final-output.html#final-output">8</a>, but in a condensed way and with the parameters used to generate the data shared during the Archaeoriddle original challenge. But before that we will we retrace the journey from the first discussions in the courtyard of the McDonald Institute in Cambridge to the final workshop in Belfast.</p>
<p>We will then end the chapater by briefly discuss the proposal submitted for the challenge.</p>
<div id="context" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Context<a href="original-challenge.html#context" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here a bit of how all that happen, and the majors steps.</p>
<div id="original-idea-and-first-reflections" class="section level3 hasAnchor" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Original idea and first reflections<a href="original-challenge.html#original-idea-and-first-reflections" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="birth-of-a-challenge" class="section level3 hasAnchor" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Birth of a Challenge<a href="original-challenge.html#birth-of-a-challenge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After discussion within the member of the CDAL, we decided that a challenge-like event, with a cash-prize, would be the best way to convince people to participate. After the B/A grant has been awarded to Simon Carrignon, Alfredo Cortell and Enrico Crema, we thus decided to announce this challenge through various social media video and a website: <a href="https://theia.arch.cam.ac.uk/archaeoriddle/" class="uri">https://theia.arch.cam.ac.uk/archaeoriddle/</a></p>
</div>
<div id="the-british-academy-grant-november-2022" class="section level3 hasAnchor" number="9.1.3">
<h3><span class="header-section-number">9.1.3</span> The British Academy Grant ‚Äì November 2022<a href="original-challenge.html#the-british-academy-grant-november-2022" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="caa-oxford-june-2023" class="section level3 hasAnchor" number="9.1.4">
<h3><span class="header-section-number">9.1.4</span> CAA Oxford ‚Äì June 2023<a href="original-challenge.html#caa-oxford-june-2023" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Paper ID: 295
Paper Title: Archaeoriddle: A collaborative game to improve archaeological inference
Abstract:
Archaeoriddle is a collaborative research project aimed to improve archaeological hypothesis building by comparing different methodological proposals within a crowd-sourced and interactive working framework. To achieve this, we created a virtual world through computational simulation, emulating an interaction process between a hypothetical group of incumbent hunter-gatherers and a group of spreading farmers. This virtual world and its associated virtual archaeological datasets have been developed by members of the Computational and Digital Archaeology Laboratory (CDAL) of the University of Cambridge and can be consulted here (<a href="https://acortell3.shinyapps.io/Archaeo_riddle/" class="uri">https://acortell3.shinyapps.io/Archaeo_riddle/</a>).
Archaeologists are well aware of the problems and limitations posed by its data. Methodological and theoretical advances have been made to tackle these challenges over the years. These include a wide range of multidisciplinary approaches, where key insights from chemistry or geology, but also mathematics and data science, are employed in order to improve and transcend the current limitations posed by the archaeological record. In particular, techniques based on statistical modelling and computational simulation, have known an exponential growth during these last years. Nevertheless, the robustness of these techniques are rarely evaluated formally, and their effective ability to reconstruct the human past is unknown. The limited samples available, and the destructive process of archaeological excavation further limits our ability to properly evaluate confounding factors such as research design and post-depositional processes, all of this contributing to archaeological uncertainty.
In short, archaeologists are constrained by the data they have, and are very rarely able to reproduce large scale studies with significant sample sizes, able to offer a data poll where the development of current formal inferential methods can be reliably applied and contrasted.
But this awareness is not enough. If we want to take archaeological formal inference one step further, we must make sure that the methods that are currently being used and developed are effective within our specific research field. This is the key objective of archaeoriddle: to offer a virtual platform and a shared dataset where different methodologies can be compared against each other, with the unique opportunity to be able to assess their ability to reconstruct the human past.
This collaborative enterprise will provide an unique chance to (1) help understand and compare different methods applied to archaeology, and (2) propose a general and necessary reflection on archaeological methodology, as a foundation for promoting solid and shared methodological standards.
Since the virtual interaction process has been created virtually, we know the exact parameters behind the farming expansion. However, interested participants are given only a very limited and indirect set of data and information about what happened. Using their preferred methods, we propose a game, following ideas by Axelrod (1980) and Rendell et al.¬†(2010), where participants have to answer a series of questions related to this virtual expansion process. In this way, archaeoriddle is thought of as a game, but which also seeks for international collaboration to understand how different current theoretical and methodological proposals behave under a controlled and testable environment.
The project was initially presented in the past CAA (in Oxford) and, therefore, this paper aims at briefly updating the project during a 5 min talk. In this edition of the CAA, we intend to focus on how tactical simulation and collaborative research can help improving methodological approaches to archaeological uncertainty.</p>
<p>References:
Axelrod, R. (1980) ‚ÄúEffective choice in the Prisoner‚Äôs Dilemma‚Äù, Journal of Conflict
Resolution, 24(1), pp.¬†3-25. DOI: <a href="https://doi.org/10.1177/002200278002400101" class="uri">https://doi.org/10.1177/002200278002400101</a>
Rendell, L., Boyd, R., Cownden, D. Enquist, M., Eriksson, K., Feldman, M. W.,
Fogarty, L., Ghirlanda, S., Lillicrap, T., Laland, K. N. (2010). ‚ÄúWhy copy others?
Insights from the Social Learning Strategies tournament‚Äù, Science, 328(5975), pp.
208-213. DOI: <a href="http://doi.org/10.1126/science.1184719" class="uri">http://doi.org/10.1126/science.1184719</a></p>
<p>Created on: Mon, 31 Oct 2022 18:04:39 GMT</p>
<p>Last Modified: Mon, 12 Dec 2022 15:04:16 GMT</p>
<p>Authors:</p>
<pre><code> - ac2320@cam.ac.uk 
 - sc2297@cam.ac.uk 
 - lmb211@cam.ac.uk 
 - cbs41@cam.ac.uk 
 - jl2094@cam.ac.uk 
 - erc62@cam.ac.uk </code></pre>
</blockquote>
</div>
<div id="the-eaa-call-for-proposal-august-2023" class="section level3 hasAnchor" number="9.1.5">
<h3><span class="header-section-number">9.1.5</span> The EAA call for proposal ‚Äì August 2023<a href="original-challenge.html#the-eaa-call-for-proposal-august-2023" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Dear colleague,</p>
<p>We hope this e-mail finds you well. We are writing to you because we would like you to know on the Archaeoriddle project, a project directed to improve methods in Archaeology and Cultural Evolution. All of the information about it is here (<a href="https://theia.arch.cam.ac.uk/archaeoriddle/" class="uri">https://theia.arch.cam.ac.uk/archaeoriddle/</a>), but very briefly for now, in this project we have simulated an interaction process between groups of foragers and farmers and generated a ‚Äúvirtual‚Äù archaeological record and we now propose a game where participants will have to answer some of the questions proposed in the website with the data provided. Because we do know the actual answer, we believe this is a great way to test the inferential power of archaeological methods.</p>
<p>This project will come to an end in a dedicated workshop in the next EAA Conference in Belfast (<a href="https://www.e-a-a.org/EAA2023" class="uri">https://www.e-a-a.org/EAA2023</a>) in late August - early September, where every participant will be able to present their results and proposed methods. We will finance ¬£650 to the best ten proposals that we receive, with a non-extendable deadline on 16th June. This money can be used to attend to the conference or in any other way the ‚Äòwinner‚Äô would prefer. The only requisite is that the winners of the award will have to present their proposal at the workshop. Finally, after the workshop, we will invite all participants (awardees and not) to contribute on a joint publication. You can have detailed information at the link above, under the tab ‚ÄúHow to participate?‚Äù. Please, consider sending your proposal to us, either yourself, or by transmitting this to any other potential researcher who could be interested. We‚Äôd love to have you there and chat about how can we improve archaeological methods!!</p>
<p>Best wishes
Alfredo Cortell-Nicolau, Simon Carrignon, Xavier Rubio-Campillo and Enrico R. Crema</p>
</blockquote>
<p>On top of allowing participants to download the public dataset, and to select new square to survey, the website mentioned in the call listed a series of research questions aimed to guide participants in their endeavours.</p>
<div id="research-questions" class="section level4 hasAnchor" number="9.1.5.1">
<h4><span class="header-section-number">9.1.5.1</span> Research Questions<a href="original-challenge.html#research-questions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><em>RQ1.</em> The Poppy-chewers and Rabbit-skinners had a hostile relationship.</p></li>
<li><p><em>RQ2.</em> Poppy-chewers followed an exponential population growth, while Rabbit-Skinners eventually stalled, and as the Poppy-chewers population size started to increase, their population declined (Fig. 3).</p></li>
<li><p><em>RQ3.</em> The rate of dispersal varied across the landscape, with an average of ~0.62 Km/year, faster for the sea crossing (~1.11 Km/year) and a slight slow-down to ~0.57 Km/year for the Northeastern quadrant of the map.</p></li>
</ul>
<p>The website where these research question will disappear anytime soon, so here is a snapshot of the first page:</p>
<p>But in case this disappear, the source to reproduce the website are also available in the github Archaeoriddle repository <a href="https://github.com/acortell3/archaeoriddle/tree/main/doc/shinyapp">here</a>.</p>
<p>The call was issued in April 2023, after acceptance of the workshop at EAA, and 5 proposals were submitted.</p>
<p>During the actual workshop, the whole project was summarised, the 5 proposal described by there respective authors, and the exact simulation reveiled.</p>
</div>
</div>
</div>
<div id="implementation-2" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Implementation<a href="original-challenge.html#implementation-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Challenge is basically built on top of a manually selected environment, generated using the tools describe in the previous chapter, on top of which a bunch of simulation have been run, and one has been selected.</p>
<p>But as <a href="sc.fram.io">Simon Carrinon</a> has done a poor job when he did the simulation he didn‚Äôt generate seeds, nor stored them, for each experiment; so we cannot re-run the original one EXACTLY as it happened. But he kept a lot of informations and output about it which, are stored in the folder <code>general_results_selected_simu/</code></p>
<p>This should be enough to allow anyone to reconstruct most of what happened. Thus, a quick recap of the implementation of the original challenge:</p>
<p>Using all the functions developed and described previously in this book, we :</p>
<ol style="list-style-type: decimal">
<li>Generate an environment that look cools</li>
<li>Choose a series of parameters and</li>
<li>Run hundreds of simulations and choose the one who looked the coolest üòÜ.</li>
</ol>
<p>We used the script <a href="https://github.com/acortell3/archaeoriddle/blob/main/doc/bookdown/scriptmini.R">scriptmini.R</a> to run one simulation, and then used a very simple and inelegant bash loop to parallelise muleiple run:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="original-challenge.html#cb90-1" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">5</span><span class="dt">}</span> <span class="kw">;</span> <span class="cf">do</span> <span class="ex">Rscript</span> scriptmini.R newset_<span class="va">$t</span> <span class="op">&gt;</span> log_new_set<span class="va">$t</span> <span class="dv">2</span><span class="op">&gt;</span> log_new_set<span class="va">$t</span>.err <span class="kw">&amp;</span>  <span class="cf">done</span></span></code></pre></div>
<p>One can see, on line 52 until the end of the <code>scriptmini.R</code>, that some graphes are saved. This will be used to quickly compare the different simulation and choose the good one.</p>
<p>The simulation are also run with the parameter: <code>visumin=TRUE</code>, which allow to save images of population growth and settlement creation at every time step while the model is running, which can then be used to generate video of the whole process using simple script like:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="original-challenge.html#cb91-1" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> test<span class="pp">*</span>_<span class="pp">?</span> <span class="kw">;</span> <span class="cf">do</span> <span class="ex">ffmpeg</span> <span class="at">-i</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">/map_000%3d.png&quot;</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">_out.mp4&quot;</span> <span class="kw">;</span> <span class="cf">done</span></span>
<span id="cb91-2"><a href="original-challenge.html#cb91-2" tabindex="-1"></a><span class="co">#need better option for web display: for i in buffattack*.mp4 ; do ffmpeg -i $i -c:v libx264 -crf 23 -preset medium -vf format=yuv420p -c:a copy -movflags +faststart web_$i ; done</span></span></code></pre></div>
<p>where <code>test*</code> will the folder storing all output of simulation. We provide the simulation that were generated during this preliminary phase in the zenodo folder associated to the first paper published fomr the Archaeoriddle project in <a href="https://zenodo.org/records/14024548/files/run_selection.tar.gz">this archive</a> (wrning, its 1.2GB).</p>
<p>Here videos showing a selection of some of the scenario discarded while choosing the ultimate run:</p>
<video style="width:45%;" autoplay controls>
<source  src="data_original/run_selection/web_buffattack300_K110_PSU065_1_out.mp4" type="video/mp4">
</video>
<video style="width:45%;" autoplay controls>
<source  src="data_original/run_selection/web_buffattack300_K110_3_out.mp4" type="video/mp4">
</video>
<video style="width:45%;" autoplay controls>
<source  src="data_original/run_selection/web_buffattack300_1_out.mp4" type="video/mp4">
</video>
<video style="width:45%;" autoplay controls>
<source  src="data_original/run_selection/web_buffattack300_3_out.mp4" type="video/mp4">
</video>
</div>
<div id="lets-rewind-the-tape" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Let‚Äôs rewind the tape<a href="original-challenge.html#lets-rewind-the-tape" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we will summarise all the steps described in the book, but using the map, sites position and parameters used in the original Challenge.</p>
<p>Load the original raster:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="original-challenge.html#cb92-1" tabindex="-1"></a></span>
<span id="cb92-2"><a href="original-challenge.html#cb92-2" tabindex="-1"></a>original.ras <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data_original/east_narnia4x.tif&quot;</span>)</span>
<span id="cb92-3"><a href="original-challenge.html#cb92-3" tabindex="-1"></a><span class="fu">plot</span>(original.ras, <span class="at">col=</span><span class="fu">col_ramp</span>(<span class="dv">20</span>), <span class="at">legend=</span>F, <span class="at">reset=</span>F)</span>
<span id="cb92-4"><a href="original-challenge.html#cb92-4" tabindex="-1"></a>original.wat <span class="ot">&lt;-</span> original.ras</span>
<span id="cb92-5"><a href="original-challenge.html#cb92-5" tabindex="-1"></a>original.wat[original.wat<span class="sc">&gt;</span><span class="fu">mean</span>(original.wat[])] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb92-6"><a href="original-challenge.html#cb92-6" tabindex="-1"></a><span class="fu">plot</span>(original.wat, <span class="at">col=</span><span class="st">&quot;lightblue&quot;</span>, <span class="at">add=</span>T, <span class="at">legend=</span>F)</span>
<span id="cb92-7"><a href="original-challenge.html#cb92-7" tabindex="-1"></a></span>
<span id="cb92-8"><a href="original-challenge.html#cb92-8" tabindex="-1"></a>original.groups <span class="ot">&lt;-</span> original.ras <span class="co"># taking back the raster created before</span></span>
<span id="cb92-9"><a href="original-challenge.html#cb92-9" tabindex="-1"></a>original.groups[original.groups<span class="sc">&lt;</span><span class="fu">mean</span>(original.groups[])] <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co">#replace values that are below mean level (under water)</span></span>
<span id="cb92-10"><a href="original-challenge.html#cb92-10" tabindex="-1"></a>original.groups[original.groups<span class="sc">&lt;</span>(maxh<span class="sc">*</span>.<span class="dv">7</span>)] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># values below 70% of the maximum original are set as 1</span></span>
<span id="cb92-11"><a href="original-challenge.html#cb92-11" tabindex="-1"></a>original.groups[original.groups<span class="sc">&gt;</span>(maxh<span class="sc">*</span>.<span class="dv">7</span>)] <span class="ot">&lt;-</span> <span class="dv">200</span> <span class="co"># value above at 200 (high mountains)</span></span>
<span id="cb92-12"><a href="original-challenge.html#cb92-12" tabindex="-1"></a>original.groups[<span class="fu">is.na</span>(original.groups)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span> <span class="co">#  NA values (below waters) are set to -1</span></span>
<span id="cb92-13"><a href="original-challenge.html#cb92-13" tabindex="-1"></a>original.poly <span class="ot">&lt;-</span> <span class="fu">as.polygons</span>(original.groups) <span class="co"># convert original.groups as polygons that will be of three type: -1 =&gt; under water, 1, viable, and 200, high mountaines</span></span>
<span id="cb92-14"><a href="original-challenge.html#cb92-14" tabindex="-1"></a>original.viable <span class="ot">&lt;-</span> <span class="fu">makeValid</span>(original.poly[<span class="dv">2</span>,]) <span class="co"># select polygon with &#39;1&#39; and make it a valid polygon as it may have some loop and problems</span></span>
<span id="cb92-15"><a href="original-challenge.html#cb92-15" tabindex="-1"></a><span class="co"># get only the non submerged actual land and plot it</span></span>
<span id="cb92-16"><a href="original-challenge.html#cb92-16" tabindex="-1"></a>above_level <span class="ot">&lt;-</span> original.ras <span class="sc">&gt;</span> <span class="fu">mean</span>(original.ras[])</span>
<span id="cb92-17"><a href="original-challenge.html#cb92-17" tabindex="-1"></a>coastline <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(<span class="fu">as.polygons</span>(above_level))[<span class="dv">2</span>,]</span>
<span id="cb92-18"><a href="original-challenge.html#cb92-18" tabindex="-1"></a><span class="fu">plot</span>(coastline, <span class="at">col=</span><span class="cn">NA</span>, <span class="at">bgc=</span><span class="fu">adjustcolor</span>(<span class="st">&quot;cyan&quot;</span>, <span class="fl">0.1</span>), <span class="at">add=</span>T)</span></code></pre></div>
<p><img src="_main_files/figure-html/originalrast-1.png" width="672" /></p>
<p>Adding resources, using the original coordinates, which were manually selected to correspond to interesting parts of the map</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="original-challenge.html#cb93-1" tabindex="-1"></a><span class="do">##ressource geolocalisation set manually</span></span>
<span id="cb93-2"><a href="original-challenge.html#cb93-2" tabindex="-1"></a>goodresources <span class="ot">&lt;-</span> <span class="fu">vect</span>(</span>
<span id="cb93-3"><a href="original-challenge.html#cb93-3" tabindex="-1"></a>  <span class="fu">cbind</span>(</span>
<span id="cb93-4"><a href="original-challenge.html#cb93-4" tabindex="-1"></a>    <span class="at">x=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.2300711</span>, <span class="sc">-</span><span class="fl">3.1455282</span>, <span class="sc">-</span><span class="fl">0.5086485</span>, <span class="sc">-</span><span class="fl">1.9639755</span>,</span>
<span id="cb93-5"><a href="original-challenge.html#cb93-5" tabindex="-1"></a>        <span class="sc">-</span><span class="fl">0.4077843</span>, <span class="fl">0.019688</span>, <span class="sc">-</span><span class="fl">3.116710</span>),</span>
<span id="cb93-6"><a href="original-challenge.html#cb93-6" tabindex="-1"></a>    <span class="at">y=</span><span class="fu">c</span>(<span class="fl">3.6423000</span>, <span class="sc">-</span><span class="fl">0.2551019</span>, <span class="sc">-</span><span class="fl">0.7440748</span>, <span class="fl">1.1303214</span>,</span>
<span id="cb93-7"><a href="original-challenge.html#cb93-7" tabindex="-1"></a>        <span class="fl">1.0248567</span>, <span class="fl">0.2194895</span>, <span class="fl">2.0267718</span>)</span>
<span id="cb93-8"><a href="original-challenge.html#cb93-8" tabindex="-1"></a>  )</span>
<span id="cb93-9"><a href="original-challenge.html#cb93-9" tabindex="-1"></a>)</span>
<span id="cb93-10"><a href="original-challenge.html#cb93-10" tabindex="-1"></a><span class="co">#spread of resources</span></span>
<span id="cb93-11"><a href="original-challenge.html#cb93-11" tabindex="-1"></a>areas <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="sc">*</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">2000</span>, <span class="dv">200</span>, <span class="dv">300</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">400</span>)</span>
<span id="cb93-12"><a href="original-challenge.html#cb93-12" tabindex="-1"></a><span class="co">#speed of ressource decay:</span></span>
<span id="cb93-13"><a href="original-challenge.html#cb93-13" tabindex="-1"></a>ks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.0002</span>, <span class="fl">0.0001000</span>, <span class="fl">0.0001600</span>, <span class="fl">0.0001800</span>, <span class="fl">0.00040</span>, .<span class="dv">0002</span>, <span class="fl">0.0002</span>)<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb93-14"><a href="original-challenge.html#cb93-14" tabindex="-1"></a></span>
<span id="cb93-15"><a href="original-challenge.html#cb93-15" tabindex="-1"></a><span class="fu">crs</span>(goodresources) <span class="ot">&lt;-</span> <span class="fu">crs</span>(original.ras)</span>
<span id="cb93-16"><a href="original-challenge.html#cb93-16" tabindex="-1"></a></span>
<span id="cb93-17"><a href="original-challenge.html#cb93-17" tabindex="-1"></a>original.allres <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb93-18"><a href="original-challenge.html#cb93-18" tabindex="-1"></a>  <span class="fu">seq_along</span>(goodresources),</span>
<span id="cb93-19"><a href="original-challenge.html#cb93-19" tabindex="-1"></a>  <span class="cf">function</span>(i){</span>
<span id="cb93-20"><a href="original-challenge.html#cb93-20" tabindex="-1"></a>    <span class="fu">logisticdecay</span>(goodresources[i], <span class="fu">mask</span>(original.ras, original.viable),</span>
<span id="cb93-21"><a href="original-challenge.html#cb93-21" tabindex="-1"></a>                  <span class="at">x=</span>areas[i], <span class="at">k=</span>ks[i]</span>
<span id="cb93-22"><a href="original-challenge.html#cb93-22" tabindex="-1"></a>    )</span>
<span id="cb93-23"><a href="original-challenge.html#cb93-23" tabindex="-1"></a>  }</span>
<span id="cb93-24"><a href="original-challenge.html#cb93-24" tabindex="-1"></a>)</span>
<span id="cb93-25"><a href="original-challenge.html#cb93-25" tabindex="-1"></a></span>
<span id="cb93-26"><a href="original-challenge.html#cb93-26" tabindex="-1"></a>allna <span class="ot">&lt;-</span> <span class="fu">sapply</span>(original.allres, <span class="cf">function</span>(i)<span class="fu">any</span>(<span class="fu">is.na</span>(<span class="fu">values</span>(i))))</span>
<span id="cb93-27"><a href="original-challenge.html#cb93-27" tabindex="-1"></a>original.allres <span class="ot">&lt;-</span> original.allres[<span class="sc">!</span>allna]</span>
<span id="cb93-28"><a href="original-challenge.html#cb93-28" tabindex="-1"></a>original.ress <span class="ot">&lt;-</span> original.allres[[<span class="dv">1</span>]]</span>
<span id="cb93-29"><a href="original-challenge.html#cb93-29" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(original.allres))</span>
<span id="cb93-30"><a href="original-challenge.html#cb93-30" tabindex="-1"></a>    original.ress <span class="ot">&lt;-</span> original.ress <span class="sc">+</span> original.allres[[i]]</span>
<span id="cb93-31"><a href="original-challenge.html#cb93-31" tabindex="-1"></a>original.ress <span class="ot">&lt;-</span> <span class="fu">mask</span>(original.ress,original.viable)</span>
<span id="cb93-32"><a href="original-challenge.html#cb93-32" tabindex="-1"></a><span class="fu">plot</span>(original.ress)</span></code></pre></div>
<p><img src="_main_files/figure-html/originalress-1.png" width="672" /></p>
<p>This, should also exactly correspond to what is stored in <code>data_original/resources.tiff</code></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="original-challenge.html#cb94-1" tabindex="-1"></a><span class="fu">plot</span>(original.ress)</span></code></pre></div>
<p><img src="_main_files/figure-html/comptiff-1.png" width="45%" /></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="original-challenge.html#cb95-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;data_original/resources.tiff&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/comptiff-2.png" width="45%" /></p>
<p>And this is <code>Rabbithole</code> home of the Poppychewer and Rabbitskinner!
We can take back the sites‚Äô positions, defined for the original Archaeoriddle and see all sites at the beginning of the simulation:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="original-challenge.html#cb96-1" tabindex="-1"></a>original.sites<span class="ot">=</span><span class="fu">vect</span>(<span class="st">&quot;data_original/sitesinitialposition/&quot;</span>)</span>
<span id="cb96-2"><a href="original-challenge.html#cb96-2" tabindex="-1"></a><span class="fu">plotMap</span>(original.ras,original.wat,<span class="fu">paste0</span>(<span class="st">&quot;year &quot;</span>, <span class="dv">0</span>))</span>
<span id="cb96-3"><a href="original-challenge.html#cb96-3" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">crds</span>(original.sites), <span class="at">pch=</span><span class="dv">21</span>, <span class="at">bg=</span><span class="fu">rainbow</span>(<span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.6</span>)[<span class="fu">as.factor</span>(original.sites<span class="sc">$</span>culture)],<span class="at">col=</span><span class="dv">1</span>)</span>
<span id="cb96-4"><a href="original-challenge.html#cb96-4" tabindex="-1"></a><span class="fu">text</span>(original.sites,<span class="at">pos=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/rabbithole-1.png" width="672" /></p>
<p>And below are the original set of parameters.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="original-challenge.html#cb97-1" tabindex="-1"></a></span>
<span id="cb97-2"><a href="original-challenge.html#cb97-2" tabindex="-1"></a>Kbase<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">35</span>,<span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">120</span>) <span class="co">#difference in K for the two cultures</span></span>
<span id="cb97-3"><a href="original-challenge.html#cb97-3" tabindex="-1"></a><span class="co"># spatial penality to extent: lower, bigger penality</span></span>
<span id="cb97-4"><a href="original-challenge.html#cb97-4" tabindex="-1"></a>cul_ext <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">6</span>)</span>
<span id="cb97-5"><a href="original-challenge.html#cb97-5" tabindex="-1"></a><span class="co"># penality of occupational area: low, other sites can come close</span></span>
<span id="cb97-6"><a href="original-challenge.html#cb97-6" tabindex="-1"></a>penal_cul <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">5</span>)</span>
<span id="cb97-7"><a href="original-challenge.html#cb97-7" tabindex="-1"></a><span class="co"># proba to give birth every year</span></span>
<span id="cb97-8"><a href="original-challenge.html#cb97-8" tabindex="-1"></a>prob_birth <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.3</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.5</span>)</span>
<span id="cb97-9"><a href="original-challenge.html#cb97-9" tabindex="-1"></a><span class="co"># proba to die when pop &gt; K</span></span>
<span id="cb97-10"><a href="original-challenge.html#cb97-10" tabindex="-1"></a>prob_survive <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.8</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.65</span>)</span>
<span id="cb97-11"><a href="original-challenge.html#cb97-11" tabindex="-1"></a><span class="co"># proba to create new settlement when Ne &gt; K</span></span>
<span id="cb97-12"><a href="original-challenge.html#cb97-12" tabindex="-1"></a>prob_split <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.2</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.6</span>)</span>
<span id="cb97-13"><a href="original-challenge.html#cb97-13" tabindex="-1"></a><span class="co"># how big the group of migrant should be to create a new city vs</span></span>
<span id="cb97-14"><a href="original-challenge.html#cb97-14" tabindex="-1"></a><span class="co"># migrate to a existing one</span></span>
<span id="cb97-15"><a href="original-challenge.html#cb97-15" tabindex="-1"></a>minimals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.14</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.20</span>)</span>
<span id="cb97-16"><a href="original-challenge.html#cb97-16" tabindex="-1"></a><span class="co"># prob to migrate to existing settlement when Ne &gt; K</span></span>
<span id="cb97-17"><a href="original-challenge.html#cb97-17" tabindex="-1"></a>prob_move <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.2</span>,<span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.1</span>)</span></code></pre></div>
<p>We can play with that, and run one simple simulation on Rabbithole:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="original-challenge.html#cb98-1" tabindex="-1"></a></span>
<span id="cb98-2"><a href="original-challenge.html#cb98-2" tabindex="-1"></a>ts <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb98-3"><a href="original-challenge.html#cb98-3" tabindex="-1"></a></span>
<span id="cb98-4"><a href="original-challenge.html#cb98-4" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Starting simulation &quot;</span>,<span class="st">&quot;nan&quot;</span>))</span>
<span id="cb98-5"><a href="original-challenge.html#cb98-5" tabindex="-1"></a><span class="do">## [1] &quot;Starting simulation nan&quot;</span></span>
<span id="cb98-6"><a href="original-challenge.html#cb98-6" tabindex="-1"></a></span>
<span id="cb98-7"><a href="original-challenge.html#cb98-7" tabindex="-1"></a>onesimu <span class="ot">&lt;-</span> <span class="fu">run_simulation</span>(</span>
<span id="cb98-8"><a href="original-challenge.html#cb98-8" tabindex="-1"></a>  <span class="at">sites=</span>original.sites, <span class="at">viable=</span>original.viable, <span class="at">dem=</span>original.ras,</span>
<span id="cb98-9"><a href="original-challenge.html#cb98-9" tabindex="-1"></a>  <span class="at">ressources=</span>original.ress,</span>
<span id="cb98-10"><a href="original-challenge.html#cb98-10" tabindex="-1"></a>  <span class="at">water=</span>original.wat,</span>
<span id="cb98-11"><a href="original-challenge.html#cb98-11" tabindex="-1"></a>  <span class="at">foldervid=</span><span class="st">&quot;nan&quot;</span>,</span>
<span id="cb98-12"><a href="original-challenge.html#cb98-12" tabindex="-1"></a>  <span class="at">visu=</span>F, <span class="at">visumin=</span>F,</span>
<span id="cb98-13"><a href="original-challenge.html#cb98-13" tabindex="-1"></a>  <span class="at">ts=</span>ts, <span class="co">#length of simulation in year</span></span>
<span id="cb98-14"><a href="original-challenge.html#cb98-14" tabindex="-1"></a>  <span class="at">Kbase=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">35</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">110</span>), <span class="co">#difference in K for the two cultures</span></span>
<span id="cb98-15"><a href="original-challenge.html#cb98-15" tabindex="-1"></a>  <span class="at">cul_ext=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">6</span>), <span class="co">#spatial penality to extent: lower, bigger penality</span></span>
<span id="cb98-16"><a href="original-challenge.html#cb98-16" tabindex="-1"></a>  <span class="at">penal_cul=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">5</span>), <span class="co">#penality of occupational area: low, other sites can cam close</span></span>
<span id="cb98-17"><a href="original-challenge.html#cb98-17" tabindex="-1"></a>  <span class="at">prob_birth=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.3</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.5</span>), <span class="co">#proba of giving birth every year</span></span>
<span id="cb98-18"><a href="original-challenge.html#cb98-18" tabindex="-1"></a>  <span class="at">prob_survive=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.8</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.65</span>), <span class="co">#proba of dying when pop &gt; K</span></span>
<span id="cb98-19"><a href="original-challenge.html#cb98-19" tabindex="-1"></a>  <span class="at">prob_split=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.5</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.6</span>), <span class="co">#proba of creating a new settlement when Ne &gt; K</span></span>
<span id="cb98-20"><a href="original-challenge.html#cb98-20" tabindex="-1"></a>  <span class="at">minimals=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.14</span>,<span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.20</span>), <span class="co">#how big the group of migrant should be to create a new city vs migrate to a existing one </span></span>
<span id="cb98-21"><a href="original-challenge.html#cb98-21" tabindex="-1"></a>  <span class="at">bufferatack=</span><span class="dv">300</span>, <span class="co">#distance max around which settlement can fight</span></span>
<span id="cb98-22"><a href="original-challenge.html#cb98-22" tabindex="-1"></a>  <span class="at">prob_move=</span><span class="fu">c</span>(<span class="st">&quot;HG&quot;</span><span class="ot">=</span><span class="fl">0.2</span>, <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="fl">0.1</span>) <span class="co">#proba of migrating to existing settlement when Ne &gt; K</span></span>
<span id="cb98-23"><a href="original-challenge.html#cb98-23" tabindex="-1"></a>)</span></code></pre></div>
<p>And explore the output:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="original-challenge.html#cb99-1" tabindex="-1"></a>Nts <span class="ot">&lt;-</span> onesimu<span class="sc">$</span>Nts <span class="co"># population at each timestep</span></span>
<span id="cb99-2"><a href="original-challenge.html#cb99-2" tabindex="-1"></a>warcasualties <span class="ot">&lt;-</span> onesimu<span class="sc">$</span>warcasualties <span class="co">#death by war at each time step</span></span>
<span id="cb99-3"><a href="original-challenge.html#cb99-3" tabindex="-1"></a><span class="fu">plot</span>(sites, <span class="at">cex=</span>(<span class="dv">1</span><span class="sc">+</span>Nts[<span class="dv">1</span>,]<span class="sc">/</span><span class="dv">100</span>), <span class="at">pch=</span><span class="dv">21</span>, <span class="at">bg=</span><span class="fu">rainbow</span>(<span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.6</span>)[<span class="fu">as.factor</span>(original.sites<span class="sc">$</span>culture)])</span>
<span id="cb99-4"><a href="original-challenge.html#cb99-4" tabindex="-1"></a></span>
<span id="cb99-5"><a href="original-challenge.html#cb99-5" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,i), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(Nts)),</span>
<span id="cb99-6"><a href="original-challenge.html#cb99-6" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">&quot;time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;popsize&quot;</span>)</span>
<span id="cb99-7"><a href="original-challenge.html#cb99-7" tabindex="-1"></a>nill  <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Nts),</span>
<span id="cb99-8"><a href="original-challenge.html#cb99-8" tabindex="-1"></a>       <span class="cf">function</span>(i)<span class="fu">lines</span>(Nts[,i], <span class="at">col=</span><span class="fu">rainbow</span>(<span class="dv">2</span>)[<span class="fu">as.factor</span>(original.sites<span class="sc">$</span>culture)[i]]))</span>
<span id="cb99-9"><a href="original-challenge.html#cb99-9" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">apply</span>(Nts, <span class="dv">1</span>, sum)[<span class="dv">1</span><span class="sc">:</span>i], <span class="at">xlab=</span><span class="st">&quot;time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;popsize&quot;</span>)</span>
<span id="cb99-10"><a href="original-challenge.html#cb99-10" tabindex="-1"></a></span>
<span id="cb99-11"><a href="original-challenge.html#cb99-11" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">nrow</span>(Nts)  <span class="co"># Get the number of rows in Nts</span></span>
<span id="cb99-12"><a href="original-challenge.html#cb99-12" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>i, original.sites<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;F&quot;</span>], <span class="dv">1</span>, sum), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;l&quot;</span>,</span>
<span id="cb99-13"><a href="original-challenge.html#cb99-13" tabindex="-1"></a>     <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">apply</span>(Nts, <span class="dv">1</span>, sum))))  <span class="co"># Plot sum of &#39;F&#39; culture values</span></span>
<span id="cb99-14"><a href="original-challenge.html#cb99-14" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>i, original.sites<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;HG&quot;</span>], <span class="dv">1</span>, sum),</span>
<span id="cb99-15"><a href="original-challenge.html#cb99-15" tabindex="-1"></a>       <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">type=</span><span class="st">&quot;l&quot;</span>)  <span class="co"># Add points for &#39;HG&#39; culture values</span></span>
<span id="cb99-16"><a href="original-challenge.html#cb99-16" tabindex="-1"></a><span class="fu">plot</span>(warcasualties[<span class="dv">1</span><span class="sc">:</span>(i<span class="dv">-1</span>)], <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>, <span class="at">type=</span><span class="st">&quot;h&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;&quot;</span>)  <span class="co"># Plot war casualties</span></span>
<span id="cb99-17"><a href="original-challenge.html#cb99-17" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">4</span>)  <span class="co"># Add an axis on the right side</span></span>
<span id="cb99-18"><a href="original-challenge.html#cb99-18" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)  <span class="co"># Allow a new plot to be drawn on the existing plot</span></span>
<span id="cb99-19"><a href="original-challenge.html#cb99-19" tabindex="-1"></a>growF <span class="ot">&lt;-</span> <span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>(i<span class="dv">-1</span>), original.sites<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;F&quot;</span>], <span class="dv">1</span>, sum)  <span class="co"># Sum of &#39;F&#39; culture values excluding last row</span></span>
<span id="cb99-20"><a href="original-challenge.html#cb99-20" tabindex="-1"></a>growHG <span class="ot">&lt;-</span> <span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>(i<span class="dv">-1</span>), original.sites<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;HG&quot;</span>], <span class="dv">1</span>, sum)  <span class="co"># Sum of &#39;HG&#39; culture values excluding last row</span></span>
<span id="cb99-21"><a href="original-challenge.html#cb99-21" tabindex="-1"></a><span class="fu">plot</span>(growF, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(growF, growHG)))  <span class="co"># Plot growth of &#39;F&#39; culture</span></span>
<span id="cb99-22"><a href="original-challenge.html#cb99-22" tabindex="-1"></a><span class="fu">points</span>(growHG, <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">type=</span><span class="st">&quot;l&quot;</span>)  <span class="co"># Add points for growth of &#39;HG&#39; culture</span></span></code></pre></div>
<p><img src="_main_files/figure-html/plotsimu-oc-1.png" width="45%" /><img src="_main_files/figure-html/plotsimu-oc-2.png" width="45%" /><img src="_main_files/figure-html/plotsimu-oc-3.png" width="45%" /><img src="_main_files/figure-html/plotsimu-oc-4.png" width="45%" /><img src="_main_files/figure-html/plotsimu-oc-5.png" width="45%" /></p>
<p>We could then apply the record deposit and the loss function as described in Chapter¬†<a href="final-output.html#final-output">8</a>, and generate a fake archaeological record to share with others. This would give a fake archaeological record for one simulation, ran using the same initial conditions and parameters as those used during the original challenge. However, these results won‚Äôt exactly replicate what occurred during the original challenge.</p>
<p>Unfortunately, as we briefly mentioned earlier, we can‚Äôt recreate <em>exactly</em> the same run from scratch because every interaction between settlements (migration, wars) and within settlements (birth and death) is stochastic. To replicate the same outcomes, we would need to use the same seed to ensure every random draw is identical. However, we can indeed run <em>multiple</em> simulations, as we did in Chapter <a href="main-simu.html#explore-simulation">5.4</a>, to estimate what typically happens under these conditions.</p>
<p>Nonetheless, even if we can‚Äôt replicate it from scratch, we still have information about what happened step by step, stored in <code>data_original/general_results_selected_simu/</code>. We will leave a larger-scale exploration of these specific parameters as an exercise for those who would like to explore them in more detail during the original challenge.</p>
<div id="generate-and-share-final-simulation" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Generate and share final simulation<a href="original-challenge.html#generate-and-share-final-simulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let‚Äôs load again the maps, matrix storing all population changes and war casualites</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="original-challenge.html#cb100-1" tabindex="-1"></a>theoriginalchallenge<span class="ot">=</span><span class="fu">readRDS</span>(<span class="st">&quot;data_original/general_results_selected_simu/buffattack300_K110_PSU065_3_all.RDS&quot;</span>)</span>
<span id="cb100-2"><a href="original-challenge.html#cb100-2" tabindex="-1"></a>Nts<span class="ot">=</span>theoriginalchallenge<span class="sc">$</span>Nts</span>
<span id="cb100-3"><a href="original-challenge.html#cb100-3" tabindex="-1"></a>warcasualties<span class="ot">=</span>theoriginalchallenge<span class="sc">$</span>warcasualties</span></code></pre></div>
<p>We can look again at the site at the beginning</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="original-challenge.html#cb101-1" tabindex="-1"></a></span>
<span id="cb101-2"><a href="original-challenge.html#cb101-2" tabindex="-1"></a>sites.oc<span class="ot">=</span><span class="fu">vect</span>(<span class="st">&quot;data_original/sitesinitialposition/&quot;</span>)</span>
<span id="cb101-3"><a href="original-challenge.html#cb101-3" tabindex="-1"></a>height.ras<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;data_original/east_narnia4x.tif&quot;</span>)</span>
<span id="cb101-4"><a href="original-challenge.html#cb101-4" tabindex="-1"></a>height.wat<span class="ot">=</span>height.ras</span>
<span id="cb101-5"><a href="original-challenge.html#cb101-5" tabindex="-1"></a>height.wat[height.wat<span class="sc">&gt;</span><span class="fu">mean</span>(height.wat[])]<span class="ot">=</span><span class="cn">NA</span></span>
<span id="cb101-6"><a href="original-challenge.html#cb101-6" tabindex="-1"></a>year<span class="ot">=</span><span class="dv">1</span> </span>
<span id="cb101-7"><a href="original-challenge.html#cb101-7" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat,<span class="fu">paste0</span>(<span class="st">&quot;year &quot;</span>,year,<span class="st">&quot;, when it all begins&quot;</span>))</span>
<span id="cb101-8"><a href="original-challenge.html#cb101-8" tabindex="-1"></a><span class="fu">plot</span>(sites.oc,<span class="at">cex=</span>(<span class="fu">as.integer</span>(Nts[year,]<span class="sc">&gt;</span><span class="dv">0</span>)<span class="sc">*</span><span class="fl">0.5</span><span class="sc">+</span>Nts[year,]<span class="sc">/</span><span class="dv">100</span>),<span class="at">pch=</span><span class="dv">21</span>,<span class="at">add=</span>T,<span class="at">bg=</span><span class="fu">rainbow</span>(<span class="dv">2</span>,<span class="at">alpha=</span>.<span class="dv">6</span>)[<span class="fu">as.factor</span>(sites.oc<span class="sc">$</span>culture)])</span>
<span id="cb101-9"><a href="original-challenge.html#cb101-9" tabindex="-1"></a><span class="fu">text</span>(sites.oc[Nts[year,]<span class="sc">&gt;</span><span class="dv">0</span>],<span class="at">pos=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plotinitialcondition-oc-1.png" width="672" /></p>
<p>We can look at the war and the number of deaths for each battle for the first 1000 years And compare it to the total population growth of each culture:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="original-challenge.html#cb102-1" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1000</span></span>
<span id="cb102-2"><a href="original-challenge.html#cb102-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">5</span>))</span>
<span id="cb102-3"><a href="original-challenge.html#cb102-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">2</span><span class="sc">:</span>i,warcasualties[<span class="dv">1</span><span class="sc">:</span>(i<span class="dv">-1</span>)],<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">col=</span><span class="st">&quot;dark red&quot;</span>,<span class="at">type=</span><span class="st">&quot;h&quot;</span>,<span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;&quot;</span>,<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,i),<span class="at">xlab=</span><span class="st">&quot;time&quot;</span>)</span>
<span id="cb102-4"><a href="original-challenge.html#cb102-4" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">4</span>)</span>
<span id="cb102-5"><a href="original-challenge.html#cb102-5" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">&quot;# dead&quot;</span>,<span class="dv">4</span>,<span class="fl">2.5</span>)</span>
<span id="cb102-6"><a href="original-challenge.html#cb102-6" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb102-7"><a href="original-challenge.html#cb102-7" tabindex="-1"></a>growF<span class="ot">=</span><span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>i,sites.oc<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;F&quot;</span>],<span class="dv">1</span>,sum)</span>
<span id="cb102-8"><a href="original-challenge.html#cb102-8" tabindex="-1"></a>growHG<span class="ot">=</span><span class="fu">apply</span>(Nts[<span class="dv">1</span><span class="sc">:</span>i,sites.oc<span class="sc">$</span>culture<span class="sc">==</span><span class="st">&quot;HG&quot;</span>],<span class="dv">1</span>,sum)</span>
<span id="cb102-9"><a href="original-challenge.html#cb102-9" tabindex="-1"></a><span class="fu">plot</span>(growF,<span class="at">col=</span><span class="st">&quot;orange&quot;</span>,<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">lwd=</span><span class="dv">5</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(growF,growHG)),<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,i),<span class="at">ylab=</span><span class="st">&quot;pop&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb102-10"><a href="original-challenge.html#cb102-10" tabindex="-1"></a><span class="fu">points</span>(growHG,<span class="at">col=</span><span class="st">&quot;blue&quot;</span>,<span class="at">lwd=</span><span class="dv">5</span>,<span class="at">type=</span><span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plotwar-oc-1.png" width="672" /></p>
<p>If we look at the total population size, we can see how the clashes slowed down the population growth:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="original-challenge.html#cb103-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">5</span>))</span>
<span id="cb103-2"><a href="original-challenge.html#cb103-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">2</span><span class="sc">:</span>i,warcasualties[<span class="dv">1</span><span class="sc">:</span>(i<span class="dv">-1</span>)],<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">col=</span><span class="st">&quot;dark red&quot;</span>,<span class="at">type=</span><span class="st">&quot;h&quot;</span>,<span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;&quot;</span>,<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,i),<span class="at">xlab=</span><span class="st">&quot;time&quot;</span>)</span>
<span id="cb103-3"><a href="original-challenge.html#cb103-3" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">4</span>)</span>
<span id="cb103-4"><a href="original-challenge.html#cb103-4" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">&quot;# dead&quot;</span>,<span class="dv">4</span>,<span class="fl">2.5</span>)</span>
<span id="cb103-5"><a href="original-challenge.html#cb103-5" tabindex="-1"></a><span class="fu">par</span>(<span class="at">new=</span>T)</span>
<span id="cb103-6"><a href="original-challenge.html#cb103-6" tabindex="-1"></a>growT<span class="ot">=</span><span class="fu">apply</span>(Nts,<span class="dv">1</span>,sum)</span>
<span id="cb103-7"><a href="original-challenge.html#cb103-7" tabindex="-1"></a><span class="fu">plot</span>(growT,<span class="at">col=</span><span class="st">&quot;black&quot;</span>,<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">lwd=</span><span class="dv">5</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(growT)),<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,i),<span class="at">ylab=</span><span class="st">&quot;pop&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plotwarTotgrowths-oc-1.png" width="672" /></p>
<p>We can also look at how the growth rates change:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="original-challenge.html#cb104-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">diff</span>(growT,<span class="at">lag=</span><span class="dv">100</span>),<span class="at">type=</span><span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/rategrowth-1.png" width="672" /></p>
<p>And replaying all of that, on the map, will give this:</p>
<video controls>
<source  src="data_original/run_selection/web_buffattack300_K110_PSU065_3_out.mp4" type="video/mp4">
</video>
<p>Using <code>Rec_c</code> , <code>short_loss</code> and <code>long_loss</code> we generated deposit from the record of the run selected from the original challenge. This takes long time when applied for all sites for all the time of simulations but can be done:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="original-challenge.html#cb105-1" tabindex="-1"></a></span>
<span id="cb105-2"><a href="original-challenge.html#cb105-2" tabindex="-1"></a>alldeposit<span class="ot">=</span><span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Nts),<span class="cf">function</span>(s)<span class="fu">Rec_c</span>(<span class="fu">sapply</span>(Nts[,s],A_rates), <span class="at">InitBP =</span> <span class="dv">7500</span>,<span class="at">ts=</span><span class="fu">ncol</span>(Nts),<span class="at">r =</span> <span class="fl">0.2</span>, <span class="at">Max_bone_thickness =</span> <span class="st">&quot;m&quot;</span>))</span>
<span id="cb105-3"><a href="original-challenge.html#cb105-3" tabindex="-1"></a>allLosses<span class="ot">=</span><span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(alldeposit),<span class="cf">function</span>(ind){</span>
<span id="cb105-4"><a href="original-challenge.html#cb105-4" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;settlement #&quot;</span>,ind));</span>
<span id="cb105-5"><a href="original-challenge.html#cb105-5" tabindex="-1"></a>    Rec<span class="ot">=</span>alldeposit[[ind]];                    </span>
<span id="cb105-6"><a href="original-challenge.html#cb105-6" tabindex="-1"></a>    Rec<span class="ot">=</span><span class="fu">apply</span>(Rec,<span class="dv">2</span>,short_loss,.<span class="dv">6</span>)  <span class="co">#apply short loss</span></span>
<span id="cb105-7"><a href="original-challenge.html#cb105-7" tabindex="-1"></a>    Rec<span class="ot">=</span><span class="fu">long_loss</span>(Rec,.<span class="dv">9997</span>,<span class="dv">7500</span>) <span class="co">#apply long loss</span></span>
<span id="cb105-8"><a href="original-challenge.html#cb105-8" tabindex="-1"></a>    <span class="fu">return</span>(Rec)</span>
<span id="cb105-9"><a href="original-challenge.html#cb105-9" tabindex="-1"></a>})</span>
<span id="cb105-10"><a href="original-challenge.html#cb105-10" tabindex="-1"></a><span class="fu">rm</span>(alldeposit) <span class="co">#we suggest you to remove the deposit object, which can be large and isn&#39;t used after</span></span></code></pre></div>
<p>We then limited the amount of sample available, with the assumption that if the biggest site was to be excavated as much as possible, we won‚Äôt have more than 30 dates from it. Thus we randomly sampled after having normalised by this max amount.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="original-challenge.html#cb106-1" tabindex="-1"></a>maxSites<span class="ot">=</span><span class="fu">max</span>(<span class="fu">sapply</span>(allLosses,sum))</span>
<span id="cb106-2"><a href="original-challenge.html#cb106-2" tabindex="-1"></a>nsample<span class="ot">=</span><span class="fu">round</span>(<span class="fu">sapply</span>(allLosses,sum)<span class="sc">*</span><span class="dv">30</span><span class="sc">/</span>maxSites)</span>
<span id="cb106-3"><a href="original-challenge.html#cb106-3" tabindex="-1"></a>allRemainingDates<span class="ot">=</span><span class="fu">lapply</span>(<span class="fu">seq_along</span>(allLosses),<span class="cf">function</span>(r)<span class="fu">extractDates</span>(allLosses[[r]],<span class="at">n=</span>nsample[r]))</span>
<span id="cb106-4"><a href="original-challenge.html#cb106-4" tabindex="-1"></a><span class="fu">rm</span>(allLosses) <span class="co">#object are big, need to free memory</span></span>
<span id="cb106-5"><a href="original-challenge.html#cb106-5" tabindex="-1"></a>dates<span class="ot">=</span><span class="fu">unique</span>(<span class="fu">unlist</span>(allRemainingDates)) <span class="co">#some dates are NA, not sure why, but need to get rid of these</span></span>
<span id="cb106-6"><a href="original-challenge.html#cb106-6" tabindex="-1"></a>dates<span class="ot">=</span><span class="fu">rev</span>(<span class="fu">sort</span>(dates[<span class="sc">!</span><span class="fu">is.na</span>(dates)]))</span>
<span id="cb106-7"><a href="original-challenge.html#cb106-7" tabindex="-1"></a>totallDatesRemains<span class="ot">=</span><span class="fu">sapply</span>(allRemainingDates,<span class="cf">function</span>(i)<span class="fu">table</span>(<span class="fu">factor</span>(i,<span class="at">levels=</span>dates)))</span>
<span id="cb106-8"><a href="original-challenge.html#cb106-8" tabindex="-1"></a><span class="fu">saveRDS</span>(allRemainingDates,<span class="at">file=</span><span class="fu">paste0</span>(expname,<span class="st">&quot;_dates.RDS&quot;</span>))</span></code></pre></div>
<p>Although the seed used for the sampling hasn‚Äôt be saved, the output of this steps been saved and get be loaded back.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="original-challenge.html#cb107-1" tabindex="-1"></a>dates.oc<span class="ot">=</span><span class="fu">readRDS</span>(<span class="st">&quot;data_original/general_results_selected_simu/buffattack300_K110_PSU065_3_dates.RDS&quot;</span>)</span>
<span id="cb107-2"><a href="original-challenge.html#cb107-2" tabindex="-1"></a>sites.oc<span class="ot">=</span><span class="fu">vect</span>(<span class="st">&quot;data_original/general_results_selected_simu/buffattack300_K110_PSU065_3_sitesRast.RDS&quot;</span>)</span></code></pre></div>
<p>After our previous sub-sampling, some sites wont have any date so we remove them from the list of available dates, that becomes:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="original-challenge.html#cb108-1" tabindex="-1"></a>foundsites.oc<span class="ot">=</span>sites.oc[<span class="fu">lengths</span>(dates.oc)<span class="sc">&gt;</span><span class="dv">0</span>,]</span>
<span id="cb108-2"><a href="original-challenge.html#cb108-2" tabindex="-1"></a>foundsites.oc<span class="sc">$</span>numdates<span class="ot">=</span><span class="fu">unlist</span>(<span class="fu">lengths</span>(dates.oc[<span class="fu">lengths</span>(dates.oc)<span class="sc">&gt;</span><span class="dv">0</span>]))</span>
<span id="cb108-3"><a href="original-challenge.html#cb108-3" tabindex="-1"></a>founddates.oc<span class="ot">=</span>dates.oc[<span class="fu">lengths</span>(dates.oc)<span class="sc">&gt;</span><span class="dv">0</span>]</span></code></pre></div>
<p>We then make it a bit annoying by removing BP to the dates, we add useless and meaningless different standard deviation:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="original-challenge.html#cb109-1" tabindex="-1"></a>stdpool<span class="ot">=</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">100</span>,<span class="dv">120</span>)</span>
<span id="cb109-2"><a href="original-challenge.html#cb109-2" tabindex="-1"></a>founddates.oc<span class="ot">=</span><span class="fu">lapply</span>(founddates.oc,sort)</span>
<span id="cb109-3"><a href="original-challenge.html#cb109-3" tabindex="-1"></a>founddates.oc<span class="ot">=</span><span class="fu">lapply</span>(founddates.oc,gsub,<span class="at">pattern=</span><span class="st">&quot; BP&quot;</span>,<span class="at">replacement=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb109-4"><a href="original-challenge.html#cb109-4" tabindex="-1"></a>founddates.oc<span class="ot">=</span><span class="fu">lapply</span>(founddates.oc,rev)</span>
<span id="cb109-5"><a href="original-challenge.html#cb109-5" tabindex="-1"></a>founddates.oc<span class="ot">=</span><span class="fu">lapply</span>(founddates.oc,<span class="cf">function</span>(i)<span class="fu">paste0</span>(i,<span class="st">&quot; ¬± &quot;</span>,<span class="fu">sample</span>(stdpool,<span class="fu">length</span>(i),<span class="at">replace=</span>T,<span class="at">prob=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>)),<span class="st">&quot; BP&quot;</span>))</span>
<span id="cb109-6"><a href="original-challenge.html#cb109-6" tabindex="-1"></a>foundsites.oc<span class="sc">$</span>dates<span class="ot">=</span><span class="fu">sapply</span>(founddates.oc,paste0,<span class="at">collapse=</span><span class="st">&quot; | &quot;</span>)</span>
<span id="cb109-7"><a href="original-challenge.html#cb109-7" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat)</span>
<span id="cb109-8"><a href="original-challenge.html#cb109-8" tabindex="-1"></a><span class="fu">plot</span>(foundsites.oc,<span class="at">cex=</span>foundsites.oc<span class="sc">$</span>numdates<span class="sc">/</span><span class="dv">20</span><span class="sc">+</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">21</span>,<span class="at">bg=</span><span class="fu">as.factor</span>(foundsites.oc<span class="sc">$</span>culture),<span class="at">add=</span>T)</span></code></pre></div>
<p><img src="_main_files/figure-html/addstdev-oc-1.png" width="672" /></p>
<p>Again, this is stochastic (the selection of the fake standard variation added is radom), so the exact results can‚Äôt be reproduced exactly, although in that case this steps doesn‚Äôt change anything, the outcome of this steps is available in the folder <a href="./data_original/all_squares.oc/">data_original/all_squares.oc/</a>.</p>
</div>
<div id="grid-generation-and-sharing" class="section level3 hasAnchor" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Grid generation and sharing<a href="original-challenge.html#grid-generation-and-sharing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Split the environment in grids and extract date for each grid</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="original-challenge.html#cb110-1" tabindex="-1"></a>leftdates<span class="ot">=</span>dates.oc[<span class="fu">lengths</span>(dates.oc)<span class="sc">&gt;</span><span class="dv">0</span>]</span>
<span id="cb110-2"><a href="original-challenge.html#cb110-2" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat)</span>
<span id="cb110-3"><a href="original-challenge.html#cb110-3" tabindex="-1"></a><span class="fu">plot</span>(foundsites.oc,<span class="at">cex=</span>foundsites.oc<span class="sc">$</span>numdates<span class="sc">/</span><span class="dv">20</span><span class="fl">+.1</span>,<span class="at">pch=</span><span class="dv">21</span>,<span class="at">bg=</span><span class="dv">1</span>,<span class="at">add=</span>T)</span>
<span id="cb110-4"><a href="original-challenge.html#cb110-4" tabindex="-1"></a>squares.oc<span class="ot">=</span><span class="fu">st_make_grid</span>(height.ras,.<span class="dv">5</span>)</span>
<span id="cb110-5"><a href="original-challenge.html#cb110-5" tabindex="-1"></a><span class="fu">plot</span>(squares.oc,<span class="at">add=</span>T,<span class="at">col=</span><span class="fu">adjustcolor</span>(<span class="fu">rainbow</span>(<span class="fu">length</span>(squares.oc)),.<span class="dv">35</span>))</span>
<span id="cb110-6"><a href="original-challenge.html#cb110-6" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(squares.oc)),<span class="at">label=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(squares.oc),<span class="at">col=</span><span class="st">&quot;white&quot;</span>)</span>
<span id="cb110-7"><a href="original-challenge.html#cb110-7" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(squares.oc)),<span class="at">label=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(squares.oc),<span class="at">col=</span><span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plotallfoundiste-oc-1.png" width="672" /></p>
<p>The original selection was :</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="original-challenge.html#cb111-1" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat)</span>
<span id="cb111-2"><a href="original-challenge.html#cb111-2" tabindex="-1"></a><span class="fu">plot</span>(foundsites.oc,<span class="at">cex=</span>foundsites.oc<span class="sc">$</span>numdates<span class="sc">/</span><span class="dv">20</span><span class="sc">+</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">21</span>,<span class="at">bg=</span><span class="fu">as.factor</span>(foundsites.oc<span class="sc">$</span>culture),<span class="at">add=</span>T)</span>
<span id="cb111-3"><a href="original-challenge.html#cb111-3" tabindex="-1"></a>selection.oc<span class="ot">=</span><span class="fu">c</span>(<span class="dv">14</span>,<span class="dv">30</span>,<span class="dv">45</span>,<span class="dv">65</span>,<span class="dv">66</span>)</span>
<span id="cb111-4"><a href="original-challenge.html#cb111-4" tabindex="-1"></a><span class="fu">plot</span>(squares.oc[selection.oc],<span class="at">add=</span>T,<span class="at">col=</span><span class="fu">adjustcolor</span>(<span class="st">&quot;blue&quot;</span>,.<span class="dv">3</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/getpublicsele-oc-1.png" width="672" /></p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="original-challenge.html#cb112-1" tabindex="-1"></a>inter.oc<span class="ot">=</span><span class="fu">st_intersection</span>(<span class="fu">st_as_sf</span>(foundsites.oc),squares.oc[selection.oc])</span>
<span id="cb112-2"><a href="original-challenge.html#cb112-2" tabindex="-1"></a><span class="do">## Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span id="cb112-3"><a href="original-challenge.html#cb112-3" tabindex="-1"></a><span class="do">## all geometries</span></span>
<span id="cb112-4"><a href="original-challenge.html#cb112-4" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat)</span>
<span id="cb112-5"><a href="original-challenge.html#cb112-5" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(inter.oc),<span class="at">add=</span>T,<span class="at">bg=</span><span class="fu">rainbow</span>(<span class="dv">2</span>,<span class="at">alpha=</span>.<span class="dv">6</span>)[<span class="fu">as.factor</span>(inter.oc<span class="sc">$</span>culture)],<span class="at">pch=</span><span class="dv">21</span>,<span class="at">cex=</span><span class="dv">1</span><span class="sc">+</span>inter.oc<span class="sc">$</span>numdates<span class="sc">/</span><span class="dv">10</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/getpublicsele-oc-2.png" width="672" /></p>
</div>
<div id="naming" class="section level3 hasAnchor" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> Giving name to the publicly available data<a href="original-challenge.html#naming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the original challange we wanted sites to have a name for the sites publicly available. To do so we used: <a href="https://www.fantasynamegenerators.com/fantasy-town-names.php">fantasynamegenerators.com</a>. We manually positionned to generate some culturally relevant group depending on their geographical position, in a way slightly inspired by the reality ; although this has no impact on the results.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="original-challenge.html#cb113-1" tabindex="-1"></a></span>
<span id="cb113-2"><a href="original-challenge.html#cb113-2" tabindex="-1"></a>site_dist<span class="ot">=</span><span class="fu">st_distance</span>(inter.oc)</span>
<span id="cb113-3"><a href="original-challenge.html#cb113-3" tabindex="-1"></a><span class="co">#min(site_dist[as.numeric(site_dist)&gt;units(0)])</span></span>
<span id="cb113-4"><a href="original-challenge.html#cb113-4" tabindex="-1"></a></span>
<span id="cb113-5"><a href="original-challenge.html#cb113-5" tabindex="-1"></a>sitesnames<span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(inter.oc)</span>
<span id="cb113-6"><a href="original-challenge.html#cb113-6" tabindex="-1"></a></span>
<span id="cb113-7"><a href="original-challenge.html#cb113-7" tabindex="-1"></a>sitesnames[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">20</span>)]<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Farwallow&quot;</span> ,<span class="st">&quot;Bearcall&quot;</span> ,<span class="st">&quot;Dustscar&quot;</span> ,<span class="st">&quot;Clearreach&quot;</span> ,<span class="st">&quot;Rabbithole&quot;</span>)</span>
<span id="cb113-8"><a href="original-challenge.html#cb113-8" tabindex="-1"></a></span>
<span id="cb113-9"><a href="original-challenge.html#cb113-9" tabindex="-1"></a>fr<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;√âpib√©liard&quot;</span> ,<span class="st">&quot;Cololu√ßon&quot;</span> ,<span class="st">&quot;Pulogne&quot;</span> ,<span class="st">&quot;Haguemasse&quot;</span> ,<span class="st">&quot;Auriteaux&quot;</span> ,<span class="st">&quot;Bourville&quot;</span> ,<span class="st">&quot;Banau&quot;</span> ,<span class="st">&quot;Montnesse&quot;</span> ,<span class="st">&quot;Bannet&quot;</span> ,<span class="st">&quot;Alenlon&quot;</span>, <span class="st">&quot;Roullac&quot;</span> ,<span class="st">&quot;Genneville&quot;</span> ,<span class="st">&quot;Vinl√®s&quot;</span> ,<span class="st">&quot;Antonnet&quot;</span> ,<span class="st">&quot;Courtou&quot;</span> ,<span class="st">&quot;Beaulogne&quot;</span> ,<span class="st">&quot;Coloville&quot;</span> ,<span class="st">&quot;Sarsart&quot;</span> ,<span class="st">&quot;Soilon&quot;</span> ,<span class="st">&quot;Cololimar&quot;</span>)</span>
<span id="cb113-10"><a href="original-challenge.html#cb113-10" tabindex="-1"></a>sitesnames[<span class="dv">5</span><span class="sc">:</span><span class="dv">19</span>]<span class="ot">=</span>fr[<span class="dv">1</span><span class="sc">:</span>(<span class="dv">19-4</span>)]</span>
<span id="cb113-11"><a href="original-challenge.html#cb113-11" tabindex="-1"></a>spain<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Zava&quot;</span> ,<span class="st">&quot;Catadrid&quot;</span> ,<span class="st">&quot;Tegon&quot;</span> ,<span class="st">&quot;Alicia&quot;</span> ,<span class="st">&quot;Mulid&quot;</span> ,<span class="st">&quot;Zararbella&quot;</span> ,<span class="st">&quot;Malid&quot;</span> ,<span class="st">&quot;C√°sca&quot;</span> ,<span class="st">&quot;Granalejos&quot;</span> ,<span class="st">&quot;Segorez&quot;</span> ,<span class="st">&quot;Terteixo&quot;</span> ,<span class="st">&quot;Astumanca&quot;</span> ,<span class="st">&quot;Galle&quot;</span> ,<span class="st">&quot;Talona&quot;</span> ,<span class="st">&quot;Girovega&quot;</span> ,<span class="st">&quot;Albanada&quot;</span> ,<span class="st">&quot;Nadoba&quot;</span> ,<span class="st">&quot;Senca&quot;</span> ,<span class="st">&quot;Vallanca&quot;</span> ,<span class="st">&quot;Taville&quot;</span>)</span>
<span id="cb113-12"><a href="original-challenge.html#cb113-12" tabindex="-1"></a></span>
<span id="cb113-13"><a href="original-challenge.html#cb113-13" tabindex="-1"></a>sitesnames[<span class="dv">21</span><span class="sc">:</span><span class="fu">length</span>(sitesnames)]<span class="ot">=</span>spain[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(sitesnames)<span class="sc">-</span><span class="dv">20</span>)]</span>
<span id="cb113-14"><a href="original-challenge.html#cb113-14" tabindex="-1"></a>inter.oc<span class="ot">=</span><span class="fu">cbind</span>(inter.oc,sitesnames)</span>
<span id="cb113-15"><a href="original-challenge.html#cb113-15" tabindex="-1"></a><span class="fu">plotMap</span>(height.ras,height.wat)</span>
<span id="cb113-16"><a href="original-challenge.html#cb113-16" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(inter.oc),<span class="at">add=</span>T,<span class="at">bg=</span><span class="fu">rainbow</span>(<span class="dv">2</span>,<span class="at">alpha=</span>.<span class="dv">6</span>)[<span class="fu">as.factor</span>(inter.oc<span class="sc">$</span>culture)],<span class="at">pch=</span><span class="dv">21</span>,<span class="at">cex=</span><span class="dv">1</span><span class="sc">+</span>inter.oc<span class="sc">$</span>numdates<span class="sc">/</span><span class="dv">10</span>)</span>
<span id="cb113-17"><a href="original-challenge.html#cb113-17" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">st_coordinates</span>(inter.oc),inter.oc<span class="sc">$</span>sitesnames,<span class="at">cex=</span>.<span class="dv">8</span>,<span class="at">pos=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/namesites-oc-1.png" width="672" /></p>
<p>We can then export <code>csv</code>s and data for each public square, and the non-public one. We here simply follow what was presented in Chapter¬†<a href="final-output.html#public-data">8.2</a>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="original-challenge.html#cb114-1" tabindex="-1"></a></span>
<span id="cb114-2"><a href="original-challenge.html#cb114-2" tabindex="-1"></a>inter.oc<span class="sc">$</span>sitesnames<span class="ot">=</span>sitesnames</span>
<span id="cb114-3"><a href="original-challenge.html#cb114-3" tabindex="-1"></a><span class="cf">for</span>(g <span class="cf">in</span> selection.oc){</span>
<span id="cb114-4"><a href="original-challenge.html#cb114-4" tabindex="-1"></a>    curr<span class="ot">=</span>inter.oc[inter.oc<span class="sc">$</span>ID<span class="sc">==</span>g,]</span>
<span id="cb114-5"><a href="original-challenge.html#cb114-5" tabindex="-1"></a>    coords<span class="ot">=</span><span class="fu">st_coordinates</span>(curr)</span>
<span id="cb114-6"><a href="original-challenge.html#cb114-6" tabindex="-1"></a>    <span class="fu">write.csv</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;square_&quot;</span>,g,<span class="st">&quot;.csv&quot;</span>),<span class="fu">cbind.data.frame</span>(<span class="at">sitename=</span>curr<span class="sc">$</span>sitesnames,<span class="at">lon=</span>coords[,<span class="dv">1</span>],<span class="at">lat=</span>coords[,<span class="dv">2</span>],<span class="at">dates=</span>curr<span class="sc">$</span>dates,<span class="at">economy=</span>curr<span class="sc">$</span>culture))</span>
<span id="cb114-7"><a href="original-challenge.html#cb114-7" tabindex="-1"></a>}</span>
<span id="cb114-8"><a href="original-challenge.html#cb114-8" tabindex="-1"></a></span>
<span id="cb114-9"><a href="original-challenge.html#cb114-9" tabindex="-1"></a>remainingsites.oc<span class="ot">=</span><span class="fu">st_intersection</span>(<span class="fu">st_as_sf</span>(foundsites.oc),squares.oc[<span class="sc">-</span>selection.oc])</span>
<span id="cb114-10"><a href="original-challenge.html#cb114-10" tabindex="-1"></a></span>
<span id="cb114-11"><a href="original-challenge.html#cb114-11" tabindex="-1"></a><span class="cf">for</span>(g <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(squares.oc))[<span class="sc">-</span>selection.oc]){</span>
<span id="cb114-12"><a href="original-challenge.html#cb114-12" tabindex="-1"></a>    curr<span class="ot">=</span>remainingsites.oc[remainingsites.oc<span class="sc">$</span>ID<span class="sc">==</span>g,]</span>
<span id="cb114-13"><a href="original-challenge.html#cb114-13" tabindex="-1"></a>    coords<span class="ot">=</span><span class="fu">st_coordinates</span>(curr)</span>
<span id="cb114-14"><a href="original-challenge.html#cb114-14" tabindex="-1"></a>    <span class="fu">write.csv</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;square_&quot;</span>,g,<span class="st">&quot;.csv&quot;</span>),<span class="fu">cbind.data.frame</span>(<span class="at">lon=</span>coords[,<span class="dv">1</span>],<span class="at">lat=</span>coords[,<span class="dv">2</span>],<span class="at">dates=</span>curr<span class="sc">$</span>dates,<span class="at">economy=</span>curr<span class="sc">$</span>culture))</span>
<span id="cb114-15"><a href="original-challenge.html#cb114-15" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="the-proposals" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> The proposals<a href="original-challenge.html#the-proposals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="p1" class="section level3 hasAnchor" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> P1<a href="original-challenge.html#p1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>P1 (<a href="https://github.com/dpriss/Archaeoriddle_Kahlenberg_Priss" class="uri">https://github.com/dpriss/Archaeoriddle_Kahlenberg_Priss</a>) was based on agent-based modelling (ABM) combined with exploratory data analysis. It first studied the land of Rabbithole and calibrated the dates provided, which were then used to compute trajectories of dispersal and study site preference using ArcGIS pro and R. The suggested dispersal rates over land and water were close to the Archaeoriddle solution. The proposal then used the results of its analyses to fit the ABM, which was built using NetLogo. For the ABM, moving groups of hunter‚Äìgatherers and farmers, as well as the different settlements, were treated as agents, with starting values obtained from the exploratory data analysis and relevant literature. Additionally, it introduced behavioural rules, including movement and site preference, reaction to population threshold or reaction to interaction. After running the model several times with different parameters, it correctly predicted a hostile relation between the two groups and inferred an initial location of the Rabbit-skinners in the northeastern quadrant and the Poppy-chewers in the southwestern quadrant, while also detecting the latters‚Äô northward movement. The expansion rate was not captured by the initial assumption of logistic growth in the areas already densely inhabited by Poppy-chewers, which makes sense considering the different population trajectories of the two groups.</p>
</div>
<div id="p2" class="section level3 hasAnchor" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> P2<a href="original-challenge.html#p2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>P2 (<a href="https://doi.org/10.5281/zenodo.12803445" class="uri">https://doi.org/10.5281/zenodo.12803445</a>) used point-process modelling focused initially on the sampling process to build first-order models combining fitness and the available cells to predict potential occupation. It then focused on the question of whether there was conflict between the two groups. After building different archaeological phases, it computed the clustering patterns of the groups under the assumption that higher clustering could lead to higher conflict (Field, 2004). Following this, it computed the interaction distance between groups of settlements of hunter‚Äìgatherers and farmers through a multitype Strauss model. According to the results, hostilities increased over time. In the original model, the rules for hostility were not time dependent, but we have seen that, even if the rules for conflict did not change, as the population grew and the number of settlements increased, there was more probability of contact and thus more probability of conflict, which finally resulted in an increased mortality.</p>
</div>
<div id="p3" class="section level3 hasAnchor" number="9.4.3">
<h3><span class="header-section-number">9.4.3</span> P3<a href="original-challenge.html#p3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>P3 (<a href="https://doi.org/10.5281/zenodo.8260754" class="uri">https://doi.org/10.5281/zenodo.8260754</a>) used species-distribution modelling in R to develop a four-stage research design. The first stage focused on determining which additional cells would result in a representative sample of the range variables (elevation and resource quality) present within the data. The second stage focused on data exploration to identify internal temporal, spatial and farmer and forager patterns. In the third stage, it generated summed probability distributions from the calibrated radiocarbon dates to generate relative estimates of population size through time for foragers and farmers. The fourth stage combined these data into a spatiotemporal species-distribution model, where both time and space were explicit predictors used to estimate the distribution of farmers and foragers in 100-year intervals. The spatiotemporal species distribution was successful in reproducing the directionality of the farming dispersal (from south to north) as well as the decline in hunter‚Äìgatherer populations.</p>
</div>
<div id="p4" class="section level3 hasAnchor" number="9.4.4">
<h3><span class="header-section-number">9.4.4</span> P4<a href="original-challenge.html#p4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>P4 (<a href="https://github.com/AlexesMes/Archeaoriddle_RabbitWorld" class="uri">https://github.com/AlexesMes/Archeaoriddle_RabbitWorld</a>) first developed a strategy to aid in the selection of additional data using a friction calculation that considered the distance from a putative origin region, the elevation of the region and its environmental suitability. Using R, analysis focused on capturing local complexity in the dispersal of Poppy-chewers in the study area. To track this, it used a hierarchical Bayesian phase model that was informed by all the selected settlements, both the ones held in common with other proposals and the ones obtained after calculations for additional sampling. This method allowed uncertainty to be introduced. It divided Rabbithole into 25 subareas and calculated the times of arrival of the Poppy-chewers for each area, including their high-probability density intervals, resulting in a successful approach to expansion rates.</p>
</div>
<div id="p5" class="section level3 hasAnchor" number="9.4.5">
<h3><span class="header-section-number">9.4.5</span> P5<a href="original-challenge.html#p5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>P5 used a qualitative approach (no code involved) that considered two cultures, A and B, initially established in regions R_A and R_B separated by a sea. Culture A eventually gained the ability to cross or bypass the barrier and to enter the region R_B and to make contact with B. Under the condition that all other parameters were equal (e.g.¬†environmental fitness in both regions and no new pathogens or predators unknown to A), a significantly shorter settlement persistence of culture A in R_B, when compared with A‚Äôs settlement persistence assessed in other regions implies a hostile relation between A and B.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="final-output.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
